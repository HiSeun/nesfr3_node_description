# cartograhper_ros package
## 1. Cartographer_node
Cartographer_node and Cartographer_occupancy_grid_node are the Google open source libraries. Cartographer is a system that provides real-time SLAM in 2D and 3D across multiple platforms and sensor configurations. Anyone can approach to its sources through [cartographer](https://github.com/cartographer-project/cartographer, "ROS_Wiki").  

### 1.1. Topics
* Subscribes
```
- nesfr3/1/lidar/points
- nesfr3/1/wheel_odom
- nesfr3/1/lidar_imu
```
```nesfr3/1/lidar/points``` is just ```sensor_msgs/PointCloud2``` type message, which contains the lidar points data.   
```nesfr3/1/wheel_odom``` is ```nav_msgs/Odometry``` type message. It would be generated by the encoder located in the wheel we guess.
```nesfr3/1/lidar_imu``` is just ```sensor_msgs/Imu``` type message. We don't know the reason why they changed the name of the topic as lidar_imu.    
It is not clear that whether the nesfr3 robot has the imu sensor itself or not.

* Publishes
```
- nesfr3/1/submap_list
```
```nesfr3/1/submap_list``` is the submap_list topic. Each step, cartograhper will create its own local map. And they save those local maps in this submap_lists and send to the cartographer_occupancy_grid_node. 

### 1.2. Role
The cartographer_node is the SLAM node used for online, real-time SLAM.
Using lidar data, it generates submaps and passes to the occupancy_grid_node.    

* * *
reference : [ROS API reference documentation](https://google-cartographer-ros.readthedocs.io/en/latest/ros_api.html, "google_cartographer")
* * *


## 2. Cartographer_occupancy_grid_node
### 2.1. Topics
* Subscribes
```
- nesfr3/1/submap_list
```

* Publishes
```
- nesfr3/1/map
```
```nesfr3/1/map``` is ```nav_msgs/OccupancyGrid``` type. We can visualize the SLAM in RViz by adding the topic name ```nesfr3/1/map```. 

### 2.2. Role
By receiving the submap_lists through the ```nesfr3/1/submap_list``` topic, this node will generate the global map.     
    
<img src = "/Shots/Cartographer1.png" width="300" height="300" align="center"></img>    

As you can see from the above image, the global map is not generated accurately, due to poor loop closure. 

* * *
reference : [ROS API reference documentation](https://google-cartographer-ros.readthedocs.io/en/latest/ros_api.html, "google_cartographer")
* * *
